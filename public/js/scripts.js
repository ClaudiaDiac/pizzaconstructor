$(function(){function t(){$("p.error").remove(),$("input").removeClass("error")}$("input.form-control").on("focus",function(){console.log("focus"),t()}),$(".register-button").on("click",function(n){n.preventDefault(),t();var e={login:$("#username").val(),email:$("#email").val(),password:$("#password").val(),passwordConfirm:$("#confirmpassword").val()};console.log(e),$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"/api/auth/register"}).done(function(t){t.ok?$(location).attr("href","/"):($(".form-register").after('<p class="error">'+t.error+"</p>"),t.fields&&t.fields.forEach(function(t){$("input[name="+t+"]").addClass("error")}))})}),$(".login-button").on("click",function(n){n.preventDefault(),t(),console.log("login");var e={login:$("#loginusername").val(),password:$("#loginpassword").val()};$.ajax({type:"POST",data:JSON.stringify(e),contentType:"application/json",url:"/api/auth/login"}).done(function(t){t.ok?$(location).attr("href","/"):($(".form-login").after('<p class="error">'+t.error+"</p>"),t.fields&&t.fields.forEach(function(t){$("input[name="+t+"]").addClass("error")}))})})}),$(function(){$(".delete-item").on("click",function(t){t.preventDefault(),$(this).parent().parent().remove()}),$("input[name='price-qty']").on("change",function(t){t.preventDefault();var n=$(this).siblings(".text-price").text(),e=$(this).val(),i=$(this).parent().parent().siblings(".subtotal").find(".text-subtotal");n=parseFloat(n),e=parseFloat(e);var a=e*n;i.text(a)}),$("input[name='basket-item-size']").on("change",function(t){t.preventDefault();var n=$(this).siblings("label").find("i").text(),e=$(this).parent().parent().siblings(".qty").find(".price-qty").find("input[type='number']").val(),i=$(this).parent().parent().siblings(".qty").find(".text-price"),a=$(this).parent().parent().siblings(".subtotal").find(".text-subtotal");n=parseFloat(n),e=parseFloat(e);var r=e*n;a.text(r),i.text(n)})}),$(function(){$("input[name='category']").on("change",function(t){t.preventDefault();var n=$(this).parent().parent().find("input[name='category']:checked").val();console.log(n)})}),$(function(){$(".add-product").on("click",function(t){t.preventDefault();$(this).siblings(".size").find("input[name='size']:checked").val(),$(this).siblings("price-qty").find(".qty").find("input[type='number']").val()}),$("input[name='qty']").on("change",function(t){t.preventDefault();var n=$(this).parent().siblings(".price").find("p").text(),e=$(this).val(),i=$(this).parent().parent().siblings("button").find("span");n=parseFloat(n),e=parseFloat(e);var a=e*n;i.text(" ("+a+" RON)")}),$("input[name='size']").on("change",function(t){t.preventDefault();var n=$(this).siblings("label").find("i").text(),e=$(this).parent().parent().siblings(".price-qty").find(".qty").find("input[type='number']").val(),i=$(this).parent().parent().siblings(".price-qty").find(".price").find("p"),a=$(this).parent().parent().siblings("button").find("span");n=parseFloat(n),e=parseFloat(e);var r=e*n;a.text(" ("+r+" RON)"),i.text(n)})});