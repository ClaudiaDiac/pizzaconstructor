$(function(){function o(){$("p.error").remove(),$("input").removeClass("error")}$("input.form-control").on("focus",function(){console.log("focus"),o()}),$(".register-button").on("click",function(r){r.preventDefault(),o();var n={login:$("#username").val(),email:$("#email").val(),password:$("#password").val(),passwordConfirm:$("#confirmpassword").val()};console.log(n),$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/register"}).done(function(o){o.ok?$(location).attr("href","/"):($(".form-register").after('<p class="error">'+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})}),$(".login-button").on("click",function(r){r.preventDefault(),o(),console.log("login");var n={login:$("#loginusername").val(),password:$("#loginpassword").val()};$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"/api/auth/login"}).done(function(o){o.ok?$(location).attr("href","/"):($(".form-login").after('<p class="error">'+o.error+"</p>"),o.fields&&o.fields.forEach(function(o){$("input[name="+o+"]").addClass("error")}))})})});